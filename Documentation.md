# Настройка приложения.
Необходимо переименовать пример.env в .env и заполнить:
```
POSTGRES_PASSWORD='Пароль Подключения к PostgreSQL'
POSTGRES_USER='Имя Пользователя для Подключения к PostgreSQL'
POSTGRES_DB='Название ДБ'
POSTGRES_PORT='5431'
```
### Установите библиотеки:
```
pip install requirements.txt
```
## Описание процесса запуска контейнера и проверки ДатаБазы? 
### docker-compose up
Команда используется для запуска контейнера, настроенного в файле docker-compose.yml.   
Создает или запускает контейнер.

### docker exec -it "Контейнер ID" sh
Команда позволяет войти внутрь контейнера (используется оболочка sh). 
Вместо "Контейнер ID" нужно подставить Ваш идентификатор контейнера, который Вы хотите открыть.

### psql -U postgres
Команда используется для подключения к базе данных под пользователем postgres.

### \c swapi
Команда переключает на базу данных с именем swapi, делает её текущей базой данных   
для выполнения последующих SQL-запросов.

### SELECT * FROM swapi_people;
Запрос выбирает все записи из таблицы swapi_people. Вернет Вам все данные,   
хранящиеся в этой таблице.

### Итоговая последовательность действий:
1. Запускаем контейнеры с помощью docker-compose up.
2. Подключаемся к контейнеру с помощью команды docker exec -it "Контейнер ID" sh.
3. Внутри контейнера подключаемся к базе данных PostgreSQL под пользователем postgres   
командой psql -U postgres.
4. Переключаемся на нужную базу данных (swapi) с помощью команды \c swapi.
5. Выполняем SQL-запрос для просмотра всех записей в таблице swapi_people:   
```
SELECT * FROM swapi_people;
```

## Дополнительная возможность:
Предусматривается возможность работы без Контейнеров.  
Для этого в составе приложения описана возможность загрузки переменных окружений:
```
dotenv_file = '.env'
load_dotenv(dotenv_file)
```
1. Необходимо указать порт 5432 в .env  
2. Создать БД swapi
3. Готово к запуску. 


## Описание Models
Скрипт содержит описание моделей для БД, асинхронное подключение
## Описание LoadBase
### Функция get_people
1. Отправляет GET-запрос к API SWAPI для получения информации о персонаже по его ID (person_id).
2. Если запрос успешен, он извлекает данные о планете («Homeworld»), заменяя URL планеты её названием.
3. Проверяется наличие данных о виде персонажа («Species») и, если они есть, заменяет ссылку на название вида.
4. Обрабатывает список фильмов, в которых участвовал персонаж, заменяя ссылки на названия фильмов.
5. проходит через списки звездолётов («Starships») и транспортных средств («Vehicles»), заменяя их URL   
на соответствующие названия.
6. В конце возвращает обновлённые данные о персонаже.
### Функция insert_results
1. Полученные данные из get_people загружает в базу данных 
### Функция main
1. Инициализирует ORM (Object-Relational Mapping), для работы с базой данных.
2. Создаёт асинхронную сессию aiohttp для выполнения HTTP-запросов.
3. Формирует список корутин (coroutines) для получения информации о людях  
с идентификаторами от 1 до 99 с помощью функции get_people.
4. Использует asyncio.gather для одновременного выполнения всех этих корутин и ожидает результаты.
5. Вставляет полученные результаты в базу данных с помощью функции insert_results.
6. Закрывает соединение с базой данных после завершения работы.

## Бонус
recreate_db.sh - удалить ДБ или создать.  
```
export PGPASSWORD='Указать пароль'
psql --host 127.0.0.1 -p 5431 -U postgres -c "DROP DATABASE swapi;"
#psql --host 127.0.0.1 -p 5431 -U postgres -c "create database swapi"

```